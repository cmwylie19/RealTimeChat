{"version":3,"sources":["../../../../src/helpers/PopoverBase/PopoverBase.js"],"names":["REACT_ONLY_PROPS","getNativeTippyProps","props","Object","keys","reduce","acc","key","indexOf","PopoverBase","isMounted","document","createElement","setState","tip","tippy","one","ReactDOM","findDOMNode","options","onCreate","isEnabled","isVisible","disable","isManualTrigger","show","set","enable","hide","destroy","children","isReactElementContent","state","createPortal","content","container","React","isValidElement","trigger","Component","PropTypes","element","isRequired","oneOfType","string","bool","func","undefined"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport tippy from 'tippy.js';\n\n// These props are not native to `tippy.js` and are specific to React only.\nconst REACT_ONLY_PROPS = ['children', 'onCreate', 'isVisible', 'isEnabled'];\n\n// Avoid Babel's large '_objectWithoutProperties' helper function.\nfunction getNativeTippyProps(props) {\n  return Object.keys(props).reduce((acc, key) => {\n    if (REACT_ONLY_PROPS.indexOf(key) === -1) {\n      acc[key] = props[key];\n    }\n    return acc;\n  }, {});\n}\n\nclass PopoverBase extends React.Component {\n  /* eslint-disable-next-line */\n  state = { isMounted: false };\n\n  container = typeof document !== 'undefined' && document.createElement('div');\n\n  static propTypes = {\n    children: PropTypes.element.isRequired,\n    content: PropTypes.oneOfType([PropTypes.string, PropTypes.element]).isRequired,\n    isEnabled: PropTypes.bool,\n    isVisible: PropTypes.bool,\n    onCreate: PropTypes.func,\n    trigger: PropTypes.string\n  };\n\n  static defaultProps = {\n    isEnabled: undefined,\n    isVisible: undefined,\n    onCreate: undefined,\n    trigger: 'mouseenter focus'\n  };\n\n  get isReactElementContent() {\n    return React.isValidElement(this.props.content);\n  }\n\n  get options() {\n    return {\n      ...getNativeTippyProps(this.props),\n      content: this.isReactElementContent ? this.container : this.props.content\n    };\n  }\n\n  get isManualTrigger() {\n    return this.props.trigger === 'manual';\n  }\n\n  componentDidMount() {\n    /* eslint-disable-next-line */\n    this.setState({ isMounted: true });\n\n    /* eslint-disable-next-line */\n    this.tip = tippy.one(ReactDOM.findDOMNode(this), this.options);\n\n    const { onCreate, isEnabled, isVisible } = this.props;\n\n    if (onCreate) {\n      onCreate(this.tip);\n    }\n\n    if (isEnabled === false) {\n      this.tip.disable();\n    }\n\n    if (this.isManualTrigger && isVisible === true) {\n      this.tip.show();\n    }\n  }\n\n  componentDidUpdate() {\n    this.tip.set(this.options);\n\n    const { isEnabled, isVisible } = this.props;\n\n    if (isEnabled === true) {\n      this.tip.enable();\n    }\n    if (isEnabled === false) {\n      this.tip.disable();\n    }\n\n    if (this.isManualTrigger) {\n      if (isVisible === true) {\n        this.tip.show();\n      }\n      if (isVisible === false) {\n        this.tip.hide();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.tip.destroy();\n    this.tip = null;\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        {this.props.children}\n        {this.isReactElementContent &&\n          this.state.isMounted &&\n          ReactDOM.createPortal(this.props.content, this.container)}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default PopoverBase;\n"],"file":"PopoverBase.js"}