{"version":3,"sources":["../../../../src/components/Dropdown/Toggle.tsx"],"names":["Toggle","React","createRef","document","addEventListener","event","onDocClick","onEscPress","removeEventListener","props","isOpen","parentRef","current","contains","target","onToggle","buttonRef","focus","keyCode","which","KEY_CODES","ESCAPE_KEY","key","preventDefault","onEnter","className","children","isFocused","isActive","isHovered","isDisabled","isPlain","isPrimary","isSplitButton","ariaHasPopup","id","type","toggleClass","styles","dropdownToggleButton","dropdownToggle","modifiers","hover","active","plain","primary","onKeyDown","Component","Function","prototype"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Dropdown/dropdown';\nimport { DropdownContext } from './dropdownConstants';\nimport { css } from '@patternfly/react-styles';\nimport { KEY_CODES } from '../../helpers/constants';\n\nexport interface ToggleProps {\n  /** HTML ID of dropdown toggle */\n  id: string;\n  /** Type to put on the button */\n  type?: 'button' | 'submit' | 'reset';\n  /** Anything which can be rendered as dropdown toggle */\n  children?: React.ReactNode;\n  /** Classes applied to root element of dropdown toggle */\n  className?: string;\n  /** Flag to indicate if menu is opened */\n  isOpen?: boolean;\n  /** Callback called when toggle is clicked */\n  onToggle?: (isOpen: boolean, event: MouseEvent | TouchEvent | KeyboardEvent | React.KeyboardEvent<any> | React.MouseEvent<HTMLButtonElement>) => void;\n  /** Callback called when the Enter key is pressed */\n  onEnter?: () => void;\n  /** Element which wraps toggle */\n  parentRef?: any;\n  /** Forces focus state */\n  isFocused?: boolean;\n  /** Forces hover state */\n  isHovered?: boolean;\n  /** Forces active state */\n  isActive?: boolean;\n  /** Disables the dropdown toggle */\n  isDisabled?: boolean;\n  /** Display the toggle with no border or background */\n  isPlain?: boolean;\n  /** Display the toggle with a primary button style */\n  isPrimary?: boolean;\n  /** Style the toggle as a child of a split button */\n  isSplitButton?: boolean;\n  /** Flag for aria popup */\n  ariaHasPopup?: boolean | 'listbox' | 'menu' | 'dialog' | 'grid' | 'listbox' | 'tree';\n}\n\nexport class Toggle extends React.Component<ToggleProps> {\n  private buttonRef = React.createRef<HTMLButtonElement>();\n\n  static defaultProps = {\n    className: '',\n    isOpen: false,\n    isFocused: false,\n    isHovered: false,\n    isActive: false,\n    isDisabled: false,\n    isPlain: false,\n    isPrimary: false,\n    isSplitButton: false,\n    onToggle: Function.prototype,\n    onEnter: Function.prototype\n  };\n\n  componentDidMount = () => {\n    document.addEventListener('mousedown', event => this.onDocClick(event));\n    document.addEventListener('touchstart', event => this.onDocClick(event));\n    document.addEventListener('keydown', event => this.onEscPress(event));\n  }\n\n  componentWillUnmount = () => {\n    document.removeEventListener('mousedown', event => this.onDocClick(event));\n    document.removeEventListener('touchstart', event => this.onDocClick(event));\n    document.removeEventListener('keydown', event => this.onEscPress(event));\n  }\n\n  onDocClick = (event: MouseEvent | TouchEvent) => {\n    if (this.props.isOpen && this.props.parentRef && this.props.parentRef.current && !this.props.parentRef.current.contains(event.target)) {\n      this.props.onToggle(false, event);\n      this.buttonRef.current.focus();\n    }\n  }\n\n  onEscPress = (event: KeyboardEvent) => {\n    const { parentRef } = this.props;\n    const keyCode = event.keyCode || event.which;\n    if (\n      this.props.isOpen &&\n      (keyCode === KEY_CODES.ESCAPE_KEY || event.key === 'Tab') &&\n      parentRef && parentRef.current && \n      parentRef.current.contains(event.target)\n    ) {\n      this.props.onToggle(false, event);\n      this.buttonRef.current.focus();\n    }\n  }\n\n  onKeyDown = (event: React.KeyboardEvent<any>) => {\n    if (event.key === 'Tab' && !this.props.isOpen) { return; }\n    event.preventDefault();\n    if ((event.key === 'Tab' || event.key === 'Enter' || event.key === ' ') && this.props.isOpen) {\n      this.props.onToggle(!this.props.isOpen, event);\n    } else if ((event.key === 'Enter' || event.key === ' ') && !this.props.isOpen) {\n      this.props.onToggle(!this.props.isOpen, event);\n      this.props.onEnter();\n    }\n  }\n\n  render() {\n    const {\n      className,\n      children,\n      isOpen,\n      isFocused,\n      isActive,\n      isHovered,\n      isDisabled,\n      isPlain,\n      isPrimary,\n      isSplitButton,\n      ariaHasPopup,\n      onToggle,\n      onEnter,\n      parentRef,\n      id,\n      type,\n      ...props\n    } = this.props;\n    return (\n      <DropdownContext.Consumer>\n        {({ toggleClass }) => (\n          <button\n            {...props}\n            id={id}\n            ref={this.buttonRef}\n            className={css(\n              isSplitButton ? styles.dropdownToggleButton : toggleClass || styles.dropdownToggle,\n              isFocused && styles.modifiers.focus,\n              isHovered && styles.modifiers.hover,\n              isActive && styles.modifiers.active,\n              isPlain && styles.modifiers.plain,\n              isPrimary && styles.modifiers.primary,\n              className\n            )}\n            type={type || 'button'}\n            onClick={(event) => onToggle(!isOpen, event)}\n            aria-expanded={isOpen}\n            aria-haspopup={ariaHasPopup}\n            onKeyDown={event => this.onKeyDown(event)}\n            disabled={isDisabled}\n          >\n            {children}\n          </button>\n        )}\n      </DropdownContext.Consumer>\n    );\n  }\n}\n"],"file":"Toggle.js"}