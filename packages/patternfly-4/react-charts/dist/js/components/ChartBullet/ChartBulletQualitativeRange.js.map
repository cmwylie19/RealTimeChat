{"version":3,"sources":["../../../../src/components/ChartBullet/ChartBulletQualitativeRange.tsx"],"names":["ChartBulletQualitativeRange","ariaDesc","ariaTitle","barWidth","ChartBulletStyles","qualitativeRangeWidth","constrainToVisibleArea","data","domain","horizontal","invert","labels","measureComponent","padding","standalone","themeColor","themeVariant","y","y0","theme","height","group","width","labelComponent","rest","computedData","tooltip","React","cloneElement","dx","result","dy","orientation","props","measure","map","dataPoint","index","key","style","fill","_color","VictoryBar"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport {\n  DataGetterPropType,\n  DomainPropType,\n  NumberOrCallback,\n  PaddingProps,\n  VictoryBar\n} from 'victory';\nimport { getQualitativeRangeData }  from './utils';\nimport { ChartBar } from '../ChartBar';\nimport { ChartContainer } from '../ChartContainer';\nimport { ChartBulletStyles, ChartThemeDefinition } from '../ChartTheme';\nimport { ChartTooltip } from '../ChartTooltip';\nimport { getBulletQualitativeRangeTheme } from '../ChartUtils';\n\n/**\n * See https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/victory/index.d.ts\n */\nexport interface ChartBulletQualitativeRangeProps {\n  /**\n   * The ariaDesc prop specifies the description of the chart/SVG to assist with\n   * accessibility for screen readers.\n   *\n   * Note: Overridden by the desc prop of containerComponent\n   */\n  ariaDesc?: string;\n  /**\n   * The ariaTitle prop specifies the title to be applied to the SVG to assist\n   * accessibility for screen readers.\n   *\n   * Note: Overridden by the title prop of containerComponent\n   */\n  ariaTitle?: string;\n  /**\n   * The barWidth prop is used to specify the width of each bar. This prop may be given as\n   * a number of pixels or as a function that returns a number. When this prop is given as\n   * a function, it will be evaluated with the arguments datum, and active. When this value\n   * is not given, a default value will be calculated based on the overall dimensions of\n   * the chart, and the number of bars.\n   */\n  barWidth?: NumberOrCallback;\n  /**\n   * The constrainToVisibleArea prop determines whether to coerce tooltips so that they fit within the visible area of\n   * the chart. When this prop is set to true, tooltip pointers will still point to the correct data point, but the\n   * center of the tooltip will be shifted to fit within the overall width and height of the svg Victory renders.\n   */\n  constrainToVisibleArea?: boolean;\n  /**\n   * The data prop specifies the data to be plotted. Data should be in the form of an array\n   * of data points, or an array of arrays of data points for multiple datasets.\n   * Each data point may be any format you wish (depending on the `comparativeErrorMeasureDataY` accessor prop),\n   * but by default, an object with y properties is expected.\n   *\n   * @example data={[{ y: 50 }]}\n   */\n  data?: any[];\n  /**\n   * The domain prop describes the range of values your chart will cover. This prop can be\n   * given as a array of the minimum and maximum expected values for your bar chart,\n   * or as an object that specifies separate arrays for x and y.\n   * If this prop is not provided, a domain will be calculated from data, or other\n   * available information.\n   * @example {x: [0, 2], y: [0, 100]}\n   *\n   * Note: The x domain is expected to be `x: [0, 2]` in order to position all measures properly\n   */\n  domain?: DomainPropType;\n  /**\n   * The height props specifies the height the svg viewBox of the chart container.\n   * This value should be given as a number of pixels\n   */\n  height?: number;\n  /**\n   * The horizontal prop determines whether the bars will be laid vertically or\n   * horizontally. The bars will be vertical if this prop is false or unspecified,\n   * or horizontal if the prop is set to true.\n   */\n  horizontal?: boolean;\n  /**\n   * Invert the color scales used to represent primary segmented measures.\n   */\n  invert?: boolean;\n  /**\n   * The labelComponent prop takes in an entire label component which will be used\n   * to create a label for the bar. The new element created from the passed labelComponent\n   * will be supplied with the following properties: x, y, index, data, verticalAnchor,\n   * textAnchor, angle, style, text, and events. any of these props may be overridden\n   * by passing in props to the supplied component, or modified or ignored within\n   * the custom component itself. If labelComponent is omitted, a new ChartLabel\n   * will be created with props described above. This labelComponent prop should be used to\n   * provide a series label for ChartBar. If individual labels are required for each\n   * data point, they should be created by composing ChartBar with VictoryScatter\n   */\n  labelComponent?: React.ReactElement<any>;\n  /**\n   * The labels prop defines labels that will appear above each bar in your chart.\n   * This prop should be given as an array of values or as a function of data.\n   * If given as an array, the number of elements in the array should be equal to\n   * the length of the data array. Labels may also be added directly to the data object\n   * like data={[{y: 1, label: \"first\"}]}.\n   * @example [\"spring\", \"summer\", \"fall\", \"winter\"], (datum) => datum.title\n   */\n  labels?: string[] | ((data: any) => string);\n  /**\n   * The measureComponent prop takes an entire component which will be used to create the chart\n   */\n  measureComponent?: React.ReactElement<any>;\n  /**\n   * The padding props specifies the amount of padding in number of pixels between\n   * the edge of the chart and any rendered child components. This prop can be given\n   * as a number or as an object with padding specified for top, bottom, left\n   * and right.\n   */\n  padding?: PaddingProps;\n  /**\n   * The standalone prop determines whether the component will render a standalone svg\n   * or a <g> tag that will be included in an external svg. Set standalone to false to\n   * compose ChartBar with other components within an enclosing <svg> tag.\n   */\n  standalone?: boolean;\n  /**\n   * The theme prop takes a style object with nested data, labels, and parent objects.\n   * You can create this object yourself, or you can use a theme provided by\n   * When using ChartBar as a solo component, implement the theme directly on\n   * ChartBar. If you are wrapping ChartBar in ChartChart or ChartGroup,\n   * please call the theme on the outermost wrapper component instead.\n   */\n  theme?: ChartThemeDefinition;\n  /**\n   * Specifies the theme color. Valid values are 'blue', 'green', 'multi', etc.\n   *\n   * Note: Not compatible with theme prop\n   *\n   * @example themeColor={ChartThemeColor.blue}\n   */\n  themeColor?: string;\n  /**\n   * Specifies the theme variant. Valid values are 'dark' or 'light'\n   *\n   * Note: Not compatible with theme prop\n   *\n   * @example themeVariant={ChartThemeVariant.light}\n   */\n  themeVariant?: string;\n  /**\n   * The width props specifies the width of the svg viewBox of the chart container\n   * This value should be given as a number of pixels\n   */\n  width?: number;\n  /**\n   * The y prop specifies how to access the Y value of each data point.\n   * If given as a function, it will be run on each data point, and returned value will be used.\n   * If given as an integer, it will be used as an array index for array-type data points.\n   * If given as a string, it will be used as a property key for object-type data points.\n   * If given as an array of strings, or a string containing dots or brackets,\n   * it will be used as a nested object property path (for details see Lodash docs for _.get).\n   * If `null` or `undefined`, the data value will be used as is (identity function/pass-through).\n   * @example 0, 'y', 'y.value.nested.1.thing', 'y[2].also.nested', null, d => Math.sin(d)\n   */\n  y?: DataGetterPropType;\n  /**\n   * Use y0 data accessor prop to determine how the component defines the baseline y0 data.\n   * This prop is useful for defining custom baselines for components like ChartBar.\n   * This prop may be given in a variety of formats.\n   * @example 'last_quarter_profit', () => 10, 1, 'employees.salary', [\"employees\", \"salary\"]\n   */\n  y0?: DataGetterPropType;\n}\n\ninterface ChartBulletQualitativeRangeDataInterface {\n  data?: any[];\n  invert?: boolean;\n  theme?: ChartThemeDefinition;\n  themeColor?: string;\n  themeVariant?: string;\n  y?: DataGetterPropType;\n  y0?: DataGetterPropType;\n}\n\ninterface ConstrainToVisibleAreaInterface {\n  height?: number;\n  horizontal?: boolean;\n  padding?: any;\n  theme?: ChartThemeDefinition;\n  width?: number;\n}\n\nexport const ChartBulletQualitativeRange: React.FunctionComponent<ChartBulletQualitativeRangeProps> = ({\n  ariaDesc,\n  ariaTitle,\n  barWidth = ChartBulletStyles.qualitativeRangeWidth,\n  constrainToVisibleArea = false,\n  data,\n  domain,\n  horizontal = true,\n  invert = false,\n  labels,\n  measureComponent = <ChartBar />,\n  padding,\n  standalone = true,\n  themeColor,\n  themeVariant,\n  y,\n  y0,\n\n  // destructure last\n  theme = getBulletQualitativeRangeTheme(themeColor, themeVariant),\n  height = theme.group.height,\n  width = theme.group.width,\n  labelComponent = <ChartTooltip />,\n  ...rest\n}: ChartBulletQualitativeRangeProps) => {\n  const computedData = getQualitativeRangeData({\n    data,\n    invert,\n    theme,\n    y,\n    y0\n  });\n\n  // Label component\n  //\n  // The x and y calculations below ensure that the tooltip appears above the bar, instead of vertically centered.\n  // Having the tooltip vertically centered is visually confusing with comparative measures.\n  //\n  // Note: SVG height and width are provided by ChartBullet as a workaround to support constrainToVisibleArea\n  const tooltip = React.cloneElement(labelComponent, {\n    constrainToVisibleArea,\n    dx: () => {\n      if (horizontal) {\n        return 0;\n      }\n      const result = (typeof barWidth === 'function') ? barWidth(data, false) : barWidth;\n      return result / 2;\n    },\n    dy: () => {\n      if (!horizontal) {\n        return 0;\n      }\n      const result = (typeof barWidth === 'function') ? barWidth(data, false) : barWidth;\n      return -(result / 2);\n    },\n    orientation: 'top',\n    ...labelComponent.props\n  });\n\n  const measure = computedData.map((dataPoint: any, index) => {\n    return React.cloneElement(measureComponent, {\n      barWidth,\n      data: [{...dataPoint}],\n      domain,\n      height,\n      horizontal,\n      key: `pf-chart-bullet-qualitative-range-${index}`,\n      labelComponent: tooltip,\n      labels,\n      padding,\n      standalone: false,\n      style: {\n        data: {\n          fill: dataPoint._color\n        }\n      },\n      theme,\n      width,\n      ...measureComponent.props\n    });\n  });\n\n  return standalone ? (\n    <ChartContainer desc={ariaDesc} height={height} title={ariaTitle} width={width}>\n      {measure}\n    </ChartContainer>\n  ) : (\n    <React.Fragment>\n      {measure}\n    </React.Fragment>\n  );\n};\n\n// Note: VictoryBar.role must be hoisted\nhoistNonReactStatics(ChartBulletQualitativeRange, VictoryBar);\n"],"file":"ChartBulletQualitativeRange.js"}