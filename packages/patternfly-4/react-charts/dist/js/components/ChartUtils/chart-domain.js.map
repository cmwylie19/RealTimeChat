{"version":3,"sources":["../../../../src/components/ChartUtils/chart-domain.ts"],"names":["getDomain","data","maxDomain","minDomain","x","y","xLow","xHigh","xLowSearch","xHighSearch","undefined","yLow","yHigh","yLowSearch","yHighSearch","datum","Data","formatData","forEach","dataPoint","_x","_y","getDomains","sources","domains","source","component","props","compData","domain","push","xDomains","yDomains","Math","min","max"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { DataGetterPropType } from 'victory';\nimport { Data } from 'victory-core';\n\ninterface DomainInterface {\n  data?: any;\n  maxDomain?: any;\n  minDomain?: any;\n  x?: DataGetterPropType;\n  y?: DataGetterPropType;\n}\n\ninterface SourcesInterface {\n  maxDomain?: any;\n  minDomain?: any;\n  sources?: {\n    component?: React.ReactElement<any>;\n    data?: any;\n  }[];\n}\n\nexport interface ChartDomain {x: [number, number], y: [number, number]}\n\n// Returns the min and max domain for given data\nexport const getDomain = ({\n  data,\n  maxDomain,\n  minDomain,\n  x,\n  y\n}: DomainInterface): ChartDomain => {\n  // x-domain\n  let xLow = 0;\n  let xHigh = 0;\n  let xLowSearch = true;\n  let xHighSearch = true;\n  if (minDomain !== undefined && minDomain.x !== undefined) {\n    xLow = minDomain.x;\n    xLowSearch = false;\n  } else if (minDomain !== undefined && minDomain.y === undefined) {\n    xLow = minDomain;\n    xLowSearch = false;\n  }\n  if (maxDomain !== undefined && maxDomain.x !== undefined) {\n    xHigh = maxDomain.x;\n    xHighSearch = false;\n  } else if (maxDomain !== undefined && maxDomain.y === undefined) {\n    xHigh = maxDomain;\n    xHighSearch = false;\n  }\n\n  // y-domain\n  let yLow = 0;\n  let yHigh = 0;\n  let yLowSearch = true;\n  let yHighSearch = true;\n  if (minDomain !== undefined && minDomain.y !== undefined) {\n    yLow = minDomain.y;\n    yLowSearch = false;\n  } else if (minDomain !== undefined && minDomain.x === undefined) {\n    yLow = minDomain;\n    yLowSearch = false;\n  }\n  if (maxDomain !== undefined && maxDomain.y !== undefined) {\n    yHigh = maxDomain.y;\n    yHighSearch = false;\n  } else if (maxDomain !== undefined && maxDomain.x === undefined) {\n    yHigh = maxDomain;\n    yHighSearch = false;\n  }\n\n  // Search data for max / min range\n  const datum = Data.formatData(data, {x, y}, ['x', 'y']);\n  datum.forEach((dataPoint: any) => {\n    if (xLowSearch) {\n      if (dataPoint._x < xLow) {\n        xLow = dataPoint._x;\n      }\n    }\n    if (xHighSearch) {\n      if (dataPoint._x > xHigh) {\n        xHigh = dataPoint._x;\n      }\n    }\n    if (yLowSearch) {\n      if (dataPoint._y < yLow) {\n        yLow = dataPoint._y;\n      }\n    }\n    if (yHighSearch) {\n      if (dataPoint._y > yHigh) {\n        yHigh = dataPoint._y;\n      }\n    }\n  });\n  return {x: [xLow, xHigh], y: [yLow, yHigh]};\n};\n\nexport const getDomains = ({\n  maxDomain,\n  minDomain,\n  sources\n}: SourcesInterface): ChartDomain => {\n  const domains: ChartDomain[] = [];\n  sources.forEach((source) => {\n    const {data: compData = source.data} = source.component ? source.component.props : undefined;\n    const domain = getDomain({\n      data: compData,\n      maxDomain,\n      minDomain,\n      x: source.component ? source.component.props.x : undefined,\n      y: source.component ? source.component.props.y : undefined\n    });\n    domains.push(domain);\n  });\n\n  const xDomains: any[] = [];\n  const yDomains: any[] = [];\n  domains.forEach((domain: any) => {\n    xDomains.push(...domain.x);\n    yDomains.push(...domain.y);\n  });\n\n  const xLow = Math.min(...xDomains);\n  const xHigh = Math.max(...xDomains);\n  const yLow = Math.min(...yDomains);\n  const yHigh = Math.max(...yDomains);\n\n  return {x: [xLow, xHigh], y: [yLow, yHigh]};\n};\n"],"file":"chart-domain.js"}