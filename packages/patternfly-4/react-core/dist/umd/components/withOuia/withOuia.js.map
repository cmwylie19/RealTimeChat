{"version":3,"sources":["../../../esm/components/withOuia/withOuia.js"],"names":["withOuiaContext","React","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","OuiaContext","createContext","WrappedComponent","props","createElement","Consumer","ComponentWithOuia","consumerContext","component","componentProps","Component","constructor","state","isOuia","ouiaId","componentDidMount","isOuiaEnv","undefined","setState","render","Provider","ouiaContext","_pt","any","isRequired","shape","bool","oneOfType","number","string"],"mappings":";;;;;;;;;;;;;;;;;;;UASgBA,e,GAAAA,e;;;;MAHJC,K;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAJZ,WAASC,QAAT,GAAoB;AAAEA,IAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,YAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,aAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,cAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,YAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,aAAOL,MAAP;AAAgB,KAA5P;;AAA8P,WAAOH,QAAQ,CAACY,KAAT,CAAe,IAAf,EAAqBP,SAArB,CAAP;AAAyC;;AAE7T,WAASQ,eAAT,CAAyBC,GAAzB,EAA8BN,GAA9B,EAAmCO,KAAnC,EAA0C;AAAE,QAAIP,GAAG,IAAIM,GAAX,EAAgB;AAAEb,MAAAA,MAAM,CAACe,cAAP,CAAsBF,GAAtB,EAA2BN,GAA3B,EAAgC;AAAEO,QAAAA,KAAK,EAAEA,KAAT;AAAgBE,QAAAA,UAAU,EAAE,IAA5B;AAAkCC,QAAAA,YAAY,EAAE,IAAhD;AAAsDC,QAAAA,QAAQ,EAAE;AAAhE,OAAhC;AAA0G,KAA5H,MAAkI;AAAEL,MAAAA,GAAG,CAACN,GAAD,CAAH,GAAWO,KAAX;AAAmB;;AAAC,WAAOD,GAAP;AAAa;;AAI1M,QAAMM,WAAW,WAAXA,WAAW,GAAGrB,KAAK,CAACsB,aAAN,CAAoB,IAApB,CAApB;;AACA,WAASvB,eAAT,CAAyBwB,gBAAzB,EAA2C;AAChD,WAAOC,KAAK,IAAIxB,KAAK,CAACyB,aAAN,CAAoBJ,WAAW,CAACK,QAAhC,EAA0C,IAA1C,EAAgDV,KAAK,IAAIhB,KAAK,CAACyB,aAAN,CAAoBE,iBAApB,EAAuC;AAC9GC,MAAAA,eAAe,EAAEZ,KAD6F;AAE9Ga,MAAAA,SAAS,EAAEN,gBAFmG;AAG9GO,MAAAA,cAAc,EAAEN;AAH8F,KAAvC,CAAzD,CAAhB;AAKD;;AAED,QAAMG,iBAAN,SAAgC3B,KAAK,CAAC+B,SAAtC,CAAgD;AAC9CC,IAAAA,WAAW,CAACR,KAAD,EAAQ;AACjB,YAAMA,KAAN;AACA,WAAKS,KAAL,GAAa;AACXC,QAAAA,MAAM,EAAE,KADG;AAEXC,QAAAA,MAAM,EAAE;AAFG,OAAb;AAID;AACD;;;;;;AAMAC,IAAAA,iBAAiB,GAAG;AAClB,YAAM;AACJF,QAAAA,MADI;AAEJC,QAAAA;AAFI,UAGF,KAAKF,KAHT;AAIA,YAAM;AACJL,QAAAA;AADI,UAEF,KAAKJ,KAFT;AAGA,YAAMa,SAAS,GAAG,8BAAlB;;AAEA,UAAIT,eAAe,IAAIA,eAAe,CAACM,MAAhB,KAA2BI,SAA9C,IAA2DV,eAAe,CAACM,MAAhB,KAA2BA,MAAtF,IAAgGG,SAAS,KAAKH,MAAlH,EAA0H;AACxH,aAAKK,QAAL,CAAc;AACZL,UAAAA,MAAM,EAAEN,eAAe,IAAIA,eAAe,CAACM,MAAhB,KAA2BI,SAA9C,GAA0DV,eAAe,CAACM,MAA1E,GAAmFG,SAD/E;AAEZF,UAAAA,MAAM,EAAEP,eAAe,IAAIA,eAAe,CAACO,MAAhB,KAA2BG,SAA9C,GAA0DV,eAAe,CAACO,MAA1E,GAAmF,8BAAmB,wBAAnB,GAAmCA;AAFlH,SAAd;AAID;AACF;;AAEDK,IAAAA,MAAM,GAAG;AACP,YAAM;AACJN,QAAAA,MADI;AAEJC,QAAAA;AAFI,UAGF,KAAKF,KAHT;AAIA,YAAM;AACJJ,QAAAA,SAAS,EAAEN,gBADP;AAEJO,QAAAA,cAFI;AAGJF,QAAAA;AAHI,UAIF,KAAKJ,KAJT;AAKA,aAAOxB,KAAK,CAACyB,aAAN,CAAoBJ,WAAW,CAACoB,QAAhC,EAA0C;AAC/CzB,QAAAA,KAAK,EAAE;AACLkB,UAAAA,MADK;AAELC,UAAAA;AAFK;AADwC,OAA1C,EAKJnC,KAAK,CAACyB,aAAN,CAAoBJ,WAAW,CAACK,QAAhC,EAA0C,IAA1C,EAAgDV,KAAK,IAAIhB,KAAK,CAACyB,aAAN,CAAoBF,gBAApB,EAAsCtB,QAAQ,CAAC,EAAD,EAAK6B,cAAL,EAAqB;AAC7HY,QAAAA,WAAW,EAAE1B;AADgH,OAArB,CAA9C,CAAzD,CALI,CAAP;AAQD;;AAlD6C;;AAsDhDF,EAAAA,eAAe,CAACa,iBAAD,EAAoB,WAApB,EAAiC;AAC9CE,IAAAA,SAAS,EAAEc,oBAAIC,GAAJ,CAAQC,UAD2B;AAE9Cf,IAAAA,cAAc,EAAEa,oBAAIC,GAAJ,CAAQC,UAFsB;AAG9CjB,IAAAA,eAAe,EAAEe,oBAAIG,KAAJ,CAAU;AACzBZ,MAAAA,MAAM,EAAES,oBAAII,IADa;AAEzBZ,MAAAA,MAAM,EAAEQ,oBAAIK,SAAJ,CAAc,CAACL,oBAAIM,MAAL,EAAaN,oBAAIO,MAAjB,CAAd;AAFiB,KAAV;AAH6B,GAAjC,CAAf","sourcesContent":["import _pt from \"prop-types\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport * as React from 'react';\nimport { isOUIAEnvironment, getUniqueId, generateOUIAId } from './ouia';\nexport const OuiaContext = React.createContext(null);\nexport function withOuiaContext(WrappedComponent) {\n  return props => React.createElement(OuiaContext.Consumer, null, value => React.createElement(ComponentWithOuia, {\n    consumerContext: value,\n    component: WrappedComponent,\n    componentProps: props\n  }));\n}\n\nclass ComponentWithOuia extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOuia: false,\n      ouiaId: null\n    };\n  }\n  /**\n   * if either consumer set isOuia through context or local storage\n   * then force a re-render\n   */\n\n\n  componentDidMount() {\n    const {\n      isOuia,\n      ouiaId\n    } = this.state;\n    const {\n      consumerContext\n    } = this.props;\n    const isOuiaEnv = isOUIAEnvironment();\n\n    if (consumerContext && consumerContext.isOuia !== undefined && consumerContext.isOuia !== isOuia || isOuiaEnv !== isOuia) {\n      this.setState({\n        isOuia: consumerContext && consumerContext.isOuia !== undefined ? consumerContext.isOuia : isOuiaEnv,\n        ouiaId: consumerContext && consumerContext.ouiaId !== undefined ? consumerContext.ouiaId : generateOUIAId() ? getUniqueId() : ouiaId\n      });\n    }\n  }\n\n  render() {\n    const {\n      isOuia,\n      ouiaId\n    } = this.state;\n    const {\n      component: WrappedComponent,\n      componentProps,\n      consumerContext\n    } = this.props;\n    return React.createElement(OuiaContext.Provider, {\n      value: {\n        isOuia,\n        ouiaId\n      }\n    }, React.createElement(OuiaContext.Consumer, null, value => React.createElement(WrappedComponent, _extends({}, componentProps, {\n      ouiaContext: value\n    }))));\n  }\n\n}\n\n_defineProperty(ComponentWithOuia, \"propTypes\", {\n  component: _pt.any.isRequired,\n  componentProps: _pt.any.isRequired,\n  consumerContext: _pt.shape({\n    isOuia: _pt.bool,\n    ouiaId: _pt.oneOfType([_pt.number, _pt.string])\n  })\n});\n//# sourceMappingURL=withOuia.js.map"],"file":"withOuia.js"}