{"version":3,"sources":["../../../../src/components/ClipboardCopy/ClipboardCopy.tsx"],"names":["clipboardCopyFunc","event","text","clipboard","currentTarget","parentElement","el","document","createElement","value","appendChild","select","execCommand","removeChild","ClipboardCopyVariant","ClipboardCopy","props","prevProps","prevState","children","updateText","_event","setState","expanded","onChange","isReadOnly","isExpanded","isCode","exitDelay","maxWidth","entryDelay","switchDelay","onCopy","hoverTip","clickTip","textAriaLabel","toggleAriaLabel","variant","position","className","divProps","textIdPrefix","toggleIdPrefix","contentIdPrefix","styles","clipboardCopy","state","modifiers","id","clipboardCopyGroup","expandContent","timer","window","clearTimeout","copied","setTimeout","React","Component","TooltipPosition","top","undefined"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/ClipboardCopy/clipboard-copy';\nimport { css } from '@patternfly/react-styles';\nimport { OneOf, Omit } from '../../helpers/typeUtils';\nimport { PopoverPosition } from '../Popover';\nimport { TextInput } from '../TextInput';\nimport { TooltipPosition } from '../Tooltip';\nimport GenerateId from '../../helpers/GenerateId/GenerateId';\nimport { ClipboardCopyButton } from './ClipboardCopyButton';\nimport { ClipboardCopyToggle } from './ClipboardCopyToggle';\nimport { ClipboardCopyExpanded } from './ClipboardCopyExpanded';\n\nexport const clipboardCopyFunc = (event: any, text: string) => {\n  const clipboard = event.currentTarget.parentElement;\n  const el = document.createElement('input');\n  el.value = text;\n  clipboard.appendChild(el);\n  el.select();\n  document.execCommand('copy');\n  clipboard.removeChild(el);\n};\n\nexport enum ClipboardCopyVariant {\n  inline = 'inline',\n  expansion = 'expansion'\n}\n\nexport interface ClipboardCopyState {\n  text: string | number;\n  expanded: boolean;\n  copied: boolean;\n}\n\nexport interface ClipboardCopyProps extends Omit<React.HTMLProps<HTMLDivElement>, 'onChange'> {\n  /** Additional classes added to the clipboard copy container. */\n  className?: string;\n  /** Tooltip message to display when hover the copy button */\n  hoverTip?: string;\n  /** Tooltip message to display when clicking the copy button */\n  clickTip?: string;\n  /** Custom flag to show that the input requires an associated id or aria-label. */\n  textAriaLabel?: string;\n  /** Custom flag to show that the toggle button requires an associated id or aria-label. */\n  toggleAriaLabel?: string;\n  /** Flag to show if the input is read only. */\n  isReadOnly?: boolean;\n  /** Flag to determine if clipboard copy is in the expanded state initially */\n  isExpanded?: boolean;\n  /** Flag to determine if clipboard copy content includes code */\n  isCode?: boolean;\n  /** Adds Clipboard Copy variant styles. */\n  variant?: typeof ClipboardCopyVariant | 'inline' | 'expansion';\n  /** Copy button popover position. */\n  position?: OneOf<typeof PopoverPosition, keyof typeof PopoverPosition>;\n  /** Maximum width of the tooltip (default 150px). */\n  maxWidth?: string;\n  /** Delay in ms before the tooltip disappears. */\n  exitDelay?: number;\n  /** Delay in ms before the tooltip appears. */\n  entryDelay?: number;\n  /** Delay in ms before the tooltip message switch to hover tip. */\n  switchDelay?: number;\n  /** A function that is triggered on clicking the copy button. */\n  onCopy?: (event: React.ClipboardEvent<HTMLDivElement>, text?: React.ReactNode) => void;\n  /** A function that is triggered on changing the text. */\n  onChange?: (text?: string | number) => void;\n  /** The text which is copied. */\n  children?: React.ReactNode;\n}\n\nexport class ClipboardCopy extends React.Component<ClipboardCopyProps, ClipboardCopyState> {\n  timer = null as number;\n  constructor(props: ClipboardCopyProps) {\n    super(props);\n    this.state = {\n      text: this.props.children as string | number,\n      expanded: this.props.isExpanded,\n      copied: false\n    };\n  }\n\n  static defaultProps = {\n    hoverTip: 'Copy to clipboard',\n    clickTip: 'Successfully copied to clipboard!',\n    isReadOnly: false,\n    isExpanded: false,\n    isCode: false,\n    variant: 'inline', \n    position: TooltipPosition.top,\n    maxWidth: '150px',\n    exitDelay: 1600,\n    entryDelay: 100,\n    switchDelay: 2000,\n    onCopy: clipboardCopyFunc,\n    onChange: (): any => undefined,\n    textAriaLabel: 'Copyable input',\n    toggleAriaLabel: 'Show content'\n  };\n\n  componentDidUpdate = (prevProps: ClipboardCopyProps, prevState: ClipboardCopyState) => {\n    if (prevProps.children !== this.props.children) {\n      this.updateText(this.props.children as string | number);\n    }\n  }\n\n  expandContent = (_event: React.MouseEvent<Element, MouseEvent>) => {\n    this.setState((prevState) => ({\n      expanded: !prevState.expanded\n    }));\n  }\n\n  updateText = (text: string | number) => {\n    this.setState({ text });\n    this.props.onChange(text);\n  }\n\n  render = () => {\n    const {\n      isReadOnly,\n      isExpanded,\n      isCode,\n      exitDelay,\n      maxWidth,\n      entryDelay,\n      switchDelay,\n      onCopy,\n      hoverTip,\n      clickTip,\n      textAriaLabel,\n      toggleAriaLabel,\n      variant,\n      position,\n      className,\n      onChange, // Don't pass to <div>\n      ...divProps\n    } = this.props;\n    const textIdPrefix = 'text-input-';\n    const toggleIdPrefix = 'toggle-';\n    const contentIdPrefix = 'content-';\n    return (\n      <div\n        className={css(styles.clipboardCopy, this.state.expanded && styles.modifiers.expanded, className)}\n        {...divProps}\n      >\n        <GenerateId prefix=\"\">\n          {(id) => (\n            <React.Fragment>\n              <div className={css(styles.clipboardCopyGroup)}>\n                {variant === 'expansion' && (\n                  <ClipboardCopyToggle\n                    isExpanded={this.state.expanded}\n                    onClick={this.expandContent}\n                    id={`${toggleIdPrefix}-${id}`}\n                    textId={`${textIdPrefix}-${id}`}\n                    contentId={`${contentIdPrefix}-${id}`}\n                    aria-label={toggleAriaLabel}\n                  />\n                )}\n                <TextInput\n                  isReadOnly={isReadOnly || this.state.expanded}\n                  onChange={this.updateText}\n                  value={this.state.text as string | number}\n                  id={`text-input-${id}`}\n                  aria-label={textAriaLabel}\n                />\n                <ClipboardCopyButton\n                  exitDelay={exitDelay}\n                  entryDelay={entryDelay}\n                  maxWidth={maxWidth}\n                  position={position}\n                  id={`copy-button-${id}`}\n                  textId={`text-input-${id}`}\n                  aria-label={hoverTip}\n                  onClick={(event: any) => {\n                    if (this.timer) {\n                      window.clearTimeout(this.timer);\n                      this.setState({ copied: false });\n                    }\n                    onCopy(event, this.state.text);\n                    this.setState({ copied: true }, () => {\n                      this.timer = window.setTimeout(() => {\n                        this.setState({ copied: false });\n                        this.timer = null;\n                      }, switchDelay);\n                    });\n                  }}\n                >\n                  {this.state.copied ? clickTip : hoverTip}\n                </ClipboardCopyButton>\n              </div>\n              {this.state.expanded && (\n                <ClipboardCopyExpanded isReadOnly={isReadOnly} isCode={isCode} id={`content-${id}`} onChange={this.updateText}>\n                  {this.state.text}\n                </ClipboardCopyExpanded>\n              )}\n            </React.Fragment>\n          )}\n        </GenerateId>\n      </div>\n    );\n  }\n}\n"],"file":"ClipboardCopy.js"}