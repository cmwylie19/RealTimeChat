{"version":3,"file":"emotion.umd.min.js","sources":["../src/create-broadcast.js","../src/channel.js","../src/utils.js","../src/theme-provider.js","../../../node_modules/hoist-non-react-statics/index.js","../src/with-theme.js"],"sourcesContent":["// @flow\n// https://github.com/styled-components/styled-components/blob/e05b3fe247e9d956bcde786cec376e32afb85bca/src/utils/create-broadcast.js\nconst createBroadcast = (initialState: any) => {\n  const listeners: { [number]: Function | void } = {}\n  let id = 0\n  let state = initialState\n\n  function publish(nextState: any) {\n    state = nextState\n\n    for (const key in listeners) {\n      // $FlowFixMe\n      const listener = listeners[key]\n      if (listener === undefined) {\n        continue\n      }\n\n      listener(state)\n    }\n  }\n\n  function subscribe(listener: any) {\n    const currentId = id\n    listeners[currentId] = listener\n    id += 1\n    listener(state)\n    return currentId\n  }\n\n  function unsubscribe(unsubID: number) {\n    listeners[unsubID] = undefined\n  }\n\n  return { publish, subscribe, unsubscribe }\n}\n\nexport default createBroadcast\n","// @flow\nexport default '__EMOTION_THEMING__'\n","// @flow\nimport PropTypes from 'prop-types'\nimport channel from './channel'\n\nexport const contextTypes = {\n  [channel]: PropTypes.object\n}\n\nexport { default as channel } from './channel'\nexport { default as createBroadcast } from './create-broadcast'\n\nexport type Theme = Object | ((theme?: Object) => Object)\n","// @flow\n// adapted from styled-components' ThemeProvider\n// https://github.com/styled-components/styled-components/blob/4503cab5b86aa9ef8314c5baa360a2fbb4812485/src/models/ThemeProvider.js\n\nimport { Component, Children, type Node as ReactNode } from 'react'\nimport createBroadcast from './create-broadcast'\nimport { channel, contextTypes, type Theme } from './utils'\n\nconst isPlainObject = test =>\n  Object.prototype.toString.call(test) === '[object Object]'\n\ntype Props = {\n  theme: Theme,\n  children: ReactNode\n}\n\n// Get the theme from the props, supporting both (outerTheme) => {} as well as object notation\nfunction getTheme(theme: Theme, outerTheme?: Object) {\n  if (typeof theme === 'function') {\n    const mergedTheme = theme(outerTheme)\n    if (!isPlainObject(mergedTheme)) {\n      throw new Error(\n        '[ThemeProvider] Please return an object from your theme function, i.e. theme={() => ({})}!'\n      )\n    }\n    return mergedTheme\n  }\n  if (!isPlainObject(theme)) {\n    throw new Error(\n      '[ThemeProvider] Please make your theme prop a plain object'\n    )\n  }\n\n  if (outerTheme === undefined) {\n    return theme\n  }\n\n  return { ...outerTheme, ...theme }\n}\n\nclass ThemeProvider extends Component<Props> {\n  outerTheme: Object\n  broadcast: *\n  unsubscribeToOuterId: number\n  componentWillMount() {\n    // If there is a ThemeProvider wrapper anywhere around this theme provider, merge this theme\n    // with the outer theme\n    if (this.context[channel] !== undefined) {\n      this.unsubscribeToOuterId = this.context[channel].subscribe(theme => {\n        this.outerTheme = theme\n\n        if (this.broadcast !== undefined) {\n          this.publish(this.props.theme)\n        }\n      })\n    }\n\n    this.broadcast = createBroadcast(\n      getTheme(this.props.theme, this.outerTheme)\n    )\n  }\n\n  getChildContext() {\n    return {\n      [channel]: {\n        subscribe: this.broadcast.subscribe,\n        unsubscribe: this.broadcast.unsubscribe\n      }\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (this.props.theme !== nextProps.theme) {\n      this.publish(nextProps.theme)\n    }\n  }\n\n  componentWillUnmount() {\n    const themeContext = this.context[channel]\n    if (themeContext !== undefined) {\n      themeContext.unsubscribe(this.unsubscribeToOuterId)\n    }\n  }\n\n  publish(theme: Theme) {\n    this.broadcast.publish(getTheme(theme, this.outerTheme))\n  }\n\n  render() {\n    if (!this.props.children) {\n      return null\n    }\n    return Children.only(this.props.children)\n  }\n}\n\nThemeProvider.childContextTypes = contextTypes\nThemeProvider.contextTypes = contextTypes\n\nexport default ThemeProvider\n","/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.hoistNonReactStatics = factory());\n}(this, (function () {\n    'use strict';\n    \n    var REACT_STATICS = {\n        childContextTypes: true,\n        contextTypes: true,\n        defaultProps: true,\n        displayName: true,\n        getDefaultProps: true,\n        getDerivedStateFromProps: true,\n        mixins: true,\n        propTypes: true,\n        type: true\n    };\n    \n    var KNOWN_STATICS = {\n        name: true,\n        length: true,\n        prototype: true,\n        caller: true,\n        callee: true,\n        arguments: true,\n        arity: true\n    };\n    \n    var defineProperty = Object.defineProperty;\n    var getOwnPropertyNames = Object.getOwnPropertyNames;\n    var getOwnPropertySymbols = Object.getOwnPropertySymbols;\n    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    var getPrototypeOf = Object.getPrototypeOf;\n    var objectPrototype = getPrototypeOf && getPrototypeOf(Object);\n    \n    return function hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n        if (typeof sourceComponent !== 'string') { // don't hoist over string (html) components\n            \n            if (objectPrototype) {\n                var inheritedComponent = getPrototypeOf(sourceComponent);\n                if (inheritedComponent && inheritedComponent !== objectPrototype) {\n                    hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n                }\n            }\n            \n            var keys = getOwnPropertyNames(sourceComponent);\n            \n            if (getOwnPropertySymbols) {\n                keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n            }\n            \n            for (var i = 0; i < keys.length; ++i) {\n                var key = keys[i];\n                if (!REACT_STATICS[key] && !KNOWN_STATICS[key] && (!blacklist || !blacklist[key])) {\n                    var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n                    try { // Avoid failures from read-only properties\n                        defineProperty(targetComponent, key, descriptor);\n                    } catch (e) {}\n                }\n            }\n            \n            return targetComponent;\n        }\n        \n        return targetComponent;\n    };\n})));\n","// @flow\nimport * as React from 'react'\nimport hoistNonReactStatics from 'hoist-non-react-statics'\nimport { channel, contextTypes } from './utils'\n\ntype Props = { theme: Object }\n\nconst withTheme = (Component: React.ComponentType<Props>) => {\n  const componentName = Component.displayName || Component.name || 'Component'\n\n  class WithTheme extends React.Component<{}, { theme: Object }> {\n    unsubscribeId: number\n    componentWillMount() {\n      const themeContext = this.context[channel]\n      if (themeContext === undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\n          '[withTheme] Please use ThemeProvider to be able to use withTheme'\n        )\n        return\n      }\n      this.unsubscribeId = themeContext.subscribe(theme => {\n        this.setState({ theme })\n      })\n    }\n\n    componentWillUnmount() {\n      if (this.unsubscribeId !== -1) {\n        this.context[channel].unsubscribe(this.unsubscribeId)\n      }\n    }\n\n    render() {\n      return <Component theme={this.state.theme} {...this.props} />\n    }\n  }\n  WithTheme.displayName = `WithTheme(${componentName})`\n  WithTheme.contextTypes = contextTypes\n\n  return hoistNonReactStatics(WithTheme, Component)\n}\n\nexport default withTheme\n"],"names":["createBroadcast","initialState","listeners","id","state","publish","nextState","key","listener","undefined","subscribe","currentId","unsubscribe","unsubID","contextTypes","channel","PropTypes","object","isPlainObject","test","Object","prototype","toString","call","getTheme","theme","outerTheme","mergedTheme","Error","ThemeProvider","componentWillMount","this","context","unsubscribeToOuterId","_this","broadcast","props","getChildContext","componentWillReceiveProps","nextProps","componentWillUnmount","themeContext","render","children","Children","only","childContextTypes","Component","REACT_STATICS","KNOWN_STATICS","defineProperty","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","module","defaultProps","displayName","getDefaultProps","getDerivedStateFromProps","mixins","propTypes","type","name","length","caller","callee","arguments","arity","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","keys","concat","i","descriptor","e","componentName","WithTheme","unsubscribeId","setState","console","error","React.createElement","React"],"mappings":"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"}