{"version":3,"sources":["../../../../../src/build/jest/snapshot-serializer/serializer.js"],"names":["createSerializer","globalCSS","test","val","withStyles","$$typeof","Symbol","print","printer","nodes","forEach","node","selectors","styles","join","code"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEO,SAASA,gBAAT,GAAmD;AAAA,iFAAJ,EAAI;AAAA,4BAAvBC,SAAuB;AAAA,MAAvBA,SAAuB,+BAAX,EAAW;;AACxD;;AACA,WAASC,IAAT,CAAcC,GAAd,EAAmB;AACjB,WAAOA,GAAG,IAAI,CAACA,GAAG,CAACC,UAAZ,IAA0BD,GAAG,CAACE,QAAJ,KAAiBC,MAAM,OAAN,CAAW,iBAAX,CAAlD;AACD;;AAED,WAASC,KAAT,CAAeJ,GAAf,EAAoBK,OAApB,EAA6B;AAC3B,QAAMC,KAAK,GAAG,0BAASN,GAAT,CAAd;AACAM,IAAAA,KAAK,CAACC,OAAN,CAAc,UAAAC,IAAI,EAAI;AACpBA,MAAAA,IAAI,CAACP,UAAL,GAAkB,IAAlB;AACD,KAFD;AAIA,QAAMQ,SAAS,GAAG,4BAAaH,KAAb,CAAlB;AACA,QAAMI,MAAM,GAAG,yBAAUD,SAAV,EAAqB,gCAAoBE,IAApB,CAAyB,EAAzB,CAArB,EAAmDb,SAAnD,CAAf;AACA,QAAMc,IAAI,GAAGP,OAAO,CAACL,GAAD,CAApB;;AACA,QAAIU,MAAJ,EAAY;AACV,uBAAUA,MAAV,iBAAuBE,IAAvB;AACD;;AACD,WAAOA,IAAP;AACD;;AAED,SAAO;AACLb,IAAAA,IAAI,EAAJA,IADK;AAELK,IAAAA,KAAK,EAALA;AAFK,GAAP;AAID;;eAEcP,gBAAgB,E","sourcesContent":["import { getSelectors, getStyles } from './cssUtils';\nimport { getNodes } from './reactUtils';\nimport { getInsertedStyles } from '../../../utils';\nimport { addOverrides } from './cssPropertyOverrides';\n\nexport function createSerializer({ globalCSS = '' } = {}) {\n  addOverrides();\n  function test(val) {\n    return val && !val.withStyles && val.$$typeof === Symbol.for('react.test.json');\n  }\n\n  function print(val, printer) {\n    const nodes = getNodes(val);\n    nodes.forEach(node => {\n      node.withStyles = true;\n    });\n\n    const selectors = getSelectors(nodes);\n    const styles = getStyles(selectors, getInsertedStyles().join(''), globalCSS);\n    const code = printer(val);\n    if (styles) {\n      return `${styles}\\n\\n${code}`;\n    }\n    return code;\n  }\n\n  return {\n    test,\n    print\n  };\n}\n\nexport default createSerializer();\n"],"file":"serializer.js"}