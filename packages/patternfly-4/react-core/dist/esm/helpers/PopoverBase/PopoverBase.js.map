{"version":3,"sources":["../../../../src/helpers/PopoverBase/PopoverBase.js"],"names":["React","ReactDOM","PropTypes","tippy","REACT_ONLY_PROPS","getNativeTippyProps","props","Object","keys","reduce","acc","key","indexOf","PopoverBase","Component","isMounted","document","createElement","isReactElementContent","isValidElement","content","options","container","isManualTrigger","trigger","componentDidMount","setState","tip","one","findDOMNode","onCreate","isEnabled","isVisible","disable","show","componentDidUpdate","set","enable","hide","componentWillUnmount","destroy","render","children","state","createPortal","element","isRequired","oneOfType","string","bool","func","undefined"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport tippy from 'tippy.js';\n\n// These props are not native to `tippy.js` and are specific to React only.\nconst REACT_ONLY_PROPS = ['children', 'onCreate', 'isVisible', 'isEnabled'];\n\n// Avoid Babel's large '_objectWithoutProperties' helper function.\nfunction getNativeTippyProps(props) {\n  return Object.keys(props).reduce((acc, key) => {\n    if (REACT_ONLY_PROPS.indexOf(key) === -1) {\n      acc[key] = props[key];\n    }\n    return acc;\n  }, {});\n}\n\nclass PopoverBase extends React.Component {\n  /* eslint-disable-next-line */\n  state = { isMounted: false };\n\n  container = typeof document !== 'undefined' && document.createElement('div');\n\n  static propTypes = {\n    children: PropTypes.element.isRequired,\n    content: PropTypes.oneOfType([PropTypes.string, PropTypes.element]).isRequired,\n    isEnabled: PropTypes.bool,\n    isVisible: PropTypes.bool,\n    onCreate: PropTypes.func,\n    trigger: PropTypes.string\n  };\n\n  static defaultProps = {\n    isEnabled: undefined,\n    isVisible: undefined,\n    onCreate: undefined,\n    trigger: 'mouseenter focus'\n  };\n\n  get isReactElementContent() {\n    return React.isValidElement(this.props.content);\n  }\n\n  get options() {\n    return {\n      ...getNativeTippyProps(this.props),\n      content: this.isReactElementContent ? this.container : this.props.content\n    };\n  }\n\n  get isManualTrigger() {\n    return this.props.trigger === 'manual';\n  }\n\n  componentDidMount() {\n    /* eslint-disable-next-line */\n    this.setState({ isMounted: true });\n\n    /* eslint-disable-next-line */\n    this.tip = tippy.one(ReactDOM.findDOMNode(this), this.options);\n\n    const { onCreate, isEnabled, isVisible } = this.props;\n\n    if (onCreate) {\n      onCreate(this.tip);\n    }\n\n    if (isEnabled === false) {\n      this.tip.disable();\n    }\n\n    if (this.isManualTrigger && isVisible === true) {\n      this.tip.show();\n    }\n  }\n\n  componentDidUpdate() {\n    this.tip.set(this.options);\n\n    const { isEnabled, isVisible } = this.props;\n\n    if (isEnabled === true) {\n      this.tip.enable();\n    }\n    if (isEnabled === false) {\n      this.tip.disable();\n    }\n\n    if (this.isManualTrigger) {\n      if (isVisible === true) {\n        this.tip.show();\n      }\n      if (isVisible === false) {\n        this.tip.hide();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.tip.destroy();\n    this.tip = null;\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        {this.props.children}\n        {this.isReactElementContent &&\n          this.state.isMounted &&\n          ReactDOM.createPortal(this.props.content, this.container)}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default PopoverBase;\n"],"file":"PopoverBase.js"}