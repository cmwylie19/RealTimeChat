{"version":3,"sources":["../../../../src/components/Modal/Modal.test.tsx"],"names":["React","shallow","mount","KEY_CODES","css","styles","Modal","jest","spyOn","document","body","props","title","onClose","fn","isOpen","children","test","view","update","expect","createElement","toBeCalledWith","toHaveBeenCalledTimes","mock","addEventListener","event","handler","calls","toBe","keyCode","ESCAPE_KEY","toBeCalled","not","first","second","instance","id","className","toContain","backdropOpen","setProps","exists","toBeTruthy","showClose","toBeFalsy"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { shallow, mount } from 'enzyme';\nimport { KEY_CODES } from '../../helpers/constants';\nimport { css } from '../../../../react-styles/dist/js';\nimport styles from '@patternfly/react-styles/css/components/Backdrop/backdrop';\n\nimport { Modal } from './Modal';\n\njest.spyOn(document, 'createElement');\njest.spyOn(document.body, 'addEventListener');\n\nconst props = {\n  title: 'Modal',\n  onClose: jest.fn(),\n  isOpen: false,\n  children: 'modal content'\n};\n\ntest('Modal creates a container element once for div', () => {\n  const view = shallow(<Modal {...props} />);\n  view.update();\n  expect(document.createElement).toBeCalledWith('div');\n  expect(document.createElement).toHaveBeenCalledTimes(1);\n});\n\ntest('modal closes with escape', () => {\n  shallow(<Modal {...props} isOpen appendTo={document.body} />);\n  const mock: any = (document.body.addEventListener as any).mock;\n  const [event, handler] = mock.calls[0];\n  expect(event).toBe('keydown');\n  handler({ keyCode: KEY_CODES.ESCAPE_KEY });\n  expect(props.onClose).toBeCalled();\n});\n\ntest('modal does not call onClose for esc key if it is not open', () => {\n  shallow(<Modal {...props} />);\n  const mock: any = (document.body.addEventListener as any).mock;\n  const [event, handler] = mock.calls[0];\n  expect(event).toBe('keydown');\n  handler({ keyCode: KEY_CODES.ESCAPE_KEY });\n  expect(props.onClose).not.toBeCalled();\n});\n\ntest('Each modal is given a new id', () => {\n  const first = shallow(<Modal {...props} />);\n  const second = shallow(<Modal {...props} />);\n  expect((first.instance() as any).id).not.toBe((second.instance() as any).id);\n});\n\ntest('modal removes body backdropOpen class when removed', () => {\n  const view = shallow(<Modal {...props} isOpen />);\n  view.update();\n  expect(document.body.className).toContain(css(styles.backdropOpen));\n  view.setProps({ isOpen: false });\n  view.update();\n  expect(document.body.className).not.toContain(css(styles.backdropOpen));\n});\n\ntest('modal shows/hides the close button based on showClose (default true)', () => {\n  const view = mount(<Modal {...props} isOpen />);\n  view.update();\n  expect(view.exists('.pf-c-modal-box .pf-c-button')).toBeTruthy();\n  view.setProps({ showClose: false });\n  view.update();\n  expect(view.exists('.pf-c-modal-box .pf-c-button')).toBeFalsy();\n});\n"],"file":"Modal.test.js"}